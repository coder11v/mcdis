<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Minecraft Server â†’ Discord</title>
  <style>
    body { font-family: system-ui, Arial; max-width: 720px; margin: 32px auto; padding: 0 16px; }
    button { padding: 8px 16px; font-size:16px; cursor:pointer; margin-top:12px; }
    .log { background:#f7f7f7; padding:8px; border-radius:6px; margin-top:12px; max-height:220px; overflow:auto; font-family:monospace; font-size:13px; }
  </style>
</head>
<body>
  <h1>Minecraft Server Status Checker</h1>
  <p>Click the button to post the server status to Discord.</p>

  <button id="checkStatusBtn">Check Server Status</button>
  <div class="log" id="log"></div>

  <script>
    const webhookURL = "YOUR_DISCORD_WEBHOOK_HERE"; // <-- Replace with your webhook
    const serverStatusUrl = "https://api.mcsrvstat.us/2/java.york.veerbajaj.com";
    const MENTION = "<@&GamerFest>"; // optional Discord role mention

    const logEl = document.getElementById("log");
    const button = document.getElementById("checkStatusBtn");

    function log(message) {
      const t = new Date().toLocaleTimeString();
      logEl.innerText = `[${t}] ${message}\n` + logEl.innerText;
    }

    async function checkServer() {
      try {
        const res = await fetch(serverStatusUrl);
        const data = await res.json();
        const statusText = data.online ? "ðŸŸ¢ Online" : "ðŸ”´ Offline";
        const motd = data.motd?.clean?.join("\n") || "N/A";
        const players = data.players?.list || [];

        const description = data.online
          ? `**Server is online!**\nMOTD: ${motd}\nPlayers: ${players.length}/${data.players?.max || "?"}`
          : "Server is offline.";

        // Send to Discord
        await fetch(webhookURL, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify({
            username: "Minecraft Monitor",
            content: MENTION,
            embeds: [{
              title: statusText,
              description,
              color: data.online ? 0x00FF00 : 0xFF0000,
              timestamp: new Date().toISOString()
            }]
          })
        });

        log(`Status sent to Discord: ${statusText}`);
      } catch (err) {
        console.error(err);
        log("Error checking server or sending webhook.");
      }
    }

    button.addEventListener("click", checkServer);
  </script>
</body>
</html>
